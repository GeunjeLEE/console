import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import PDynamicLayout from '@/data-display/dynamic/dynamic-layout/PDynamicLayout.vue';
import {i18n} from '@/translations'
import { getDynamicLayoutSimpleTableArgTypes } from '@/data-display/dynamic/dynamic-layout/templates/simple-table/story-helper';

<Meta title='Data Display/Dynamic/Dynamic Layout/Simple Table'
      argTypes={getDynamicLayoutSimpleTableArgTypes()}/>


export const Template = (args, { argTypes }) => ({
    props: Object.keys(argTypes),
    components: { PDynamicLayout },
    i18n,
    template: `
      <p-dynamic-layout :name="name" type="simple-table"
                          :options="options"
                          :data="data"
                          :type-options="{
                              loading,
                              timezone,
                              colCopy,
                          }"
                          :fetch-options="{
                          }"
                           class="w-full"
            >
        </p-dynamic-layout>
    `,
    setup() {
        return {
        }
    }
});

# Simple Table Type
<br/>
<br/>

## Supported Options

| Name | Supported |
| ---- | ----------- |
| root_path | O |
| translation_id | O |
| fields | O |
| markdown | X |
| layouts | X |
| search | X |


## Supported Fetch Options

| Name | Supported |
| ---- | ---- |
| sortBy | X |
| sortDesc | X |
| pageStart | X |
| pageLimit | X |
| searchText | X |
| queryTags | X |

## Type Options

| Name | Type |
| ---- | ---- |
| loading | boolean |
| timezone | string |
| colCopy | boolean |

## Supported Type Options

| Type Option Name | Supported |
| ---- | ---- |
| loading | O |
| totalCount | X |
| timezone | O |
| selectIndex | X |
| selectable | X |
| multiSelect | X |
| invalid | X |
| colCopy | O |
| excelVisible | X |
| settingsVisible | X |
| searchable | X |
| keyItemSets | X |
| valueHandlerMap | X |
| language | X |


## Supported Events

| Event Name | Supported |
| ---------- | ----------- |
| fetch | X |
| select | X |
| export | X |
| click-settings | X |

<br/>
<br/>

## Playground

<Canvas>
    <Story name="Playground"  args={{
        options: {
            root_path: 'data.security_groups.security_group_rules',
            fields: [
                {
                    name: 'Security Group Name',
                    key: 'security_group_name',
                    type: 'text',
                },
                {
                    name: 'Security Group ID',
                    type: 'text',
                    reference: {
                        resource_type: 'inventory.CloudService',
                        reference_key: 'reference.resource_id',
                    },
                    key: 'security_group_id',
                },
                {
                    type: 'enum',
                    key: 'direction',
                    name: 'Direction',
                    options: {
                        egress: {
                            options: {
                                background_color: 'indigo.500',
                            },
                            type: 'badge',
                        },
                        ingress: {
                            type: 'badge',
                            options: {
                                background_color: 'coral.600',
                            },
                        },
                    },
                },
                {
                    type: 'text',
                    name: 'Type',
                    key: 'ethertype',
                },
                {
                    name: 'Start',
                    type: 'text',
                    key: 'port_range_min',
                },
                {
                    name: 'End',
                    type: 'text',
                    key: 'port_range_max',
                },
                {
                    name: 'Protocol',
                    key: 'protocol',
                    type: 'enum',
                    options: {
                        udp: {
                            options: {
                                background_color: 'peacock.500',
                            },
                            type: 'badge',
                        },
                        icmp: {
                            options: {
                                background_color: 'green.500',
                            },
                            type: 'badge',
                        },
                        tcp: {
                            type: 'badge',
                            options: {
                                background_color: 'indigo.500',
                            },
                        },
                        all: {
                            options: {
                                background_color: 'coral.600',
                            },
                            type: 'badge',
                        },
                    },
                },
                {
                    type: 'text',
                    name: 'Remote',
                    key: 'remote_ip_prefix',
                },
                {
                    key: 'created_at',
                    name: 'Created',
                    type: 'datetime',
                },
            ],
        },
        data: {
            data: {
                id: '894bb5d2-433b-4260-bc8e-91c01899e301',
                name: 'hubble-k8s-worker-junlee-01',
                security_groups: [
                    {
                        security_group_rules: [
                            {
                                id: '3f5526c7-7c7f-44a5-b49e-ceb56fa192a1',
                                created_at: '2021-06-30T05:41:33.000000+0000',
                                external_link: null,
                                port_range_min: 22,
                                port_range_max: 22,
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                security_group_name: 'default',
                                ethertype: 'IPv4',
                                direction: 'ingress',
                                region_name: null,
                                protocol: 'tcp',
                                remote_ip_prefix: '0.0.0.0/0',
                            },
                            {
                                direction: 'ingress',
                                port_range_min: 1,
                                created_at: '2021-06-30T04:33:40.000000+0000',
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                protocol: 'tcp',
                                id: '43c49b37-e24b-4ea9-9200-070812dcd1aa',
                                ethertype: 'IPv4',
                                remote_ip_prefix: '0.0.0.0/0',
                                security_group_name: 'default',
                                port_range_max: 65535,
                                external_link: null,
                                region_name: null,
                            },
                            {
                                created_at: '2021-06-28T06:33:28.000000+0000',
                                remote_ip_prefix: null,
                                security_group_name: 'default',
                                port_range_max: null,
                                external_link: null,
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                protocol: null,
                                direction: 'ingress',
                                ethertype: 'IPv6',
                                id: '5dab4c91-3bdc-40a2-8f02-d3e790eb6c69',
                                region_name: null,
                                port_range_min: null,
                            },
                            {
                                security_group_name: 'default',
                                region_name: null,
                                ethertype: 'IPv4',
                                port_range_max: null,
                                direction: 'ingress',
                                port_range_min: null,
                                created_at: '2021-06-30T05:55:34.000000+0000',
                                id: '78656420-bdb2-4a12-bb46-3e6d5d08044a',
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                external_link: null,
                                protocol: 'icmp',
                                remote_ip_prefix: '0.0.0.0/0',
                            },
                            {
                                created_at: '2021-06-30T06:07:53.000000+0000',
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                ethertype: 'IPv4',
                                direction: 'egress',
                                remote_ip_prefix: '0.0.0.0/0',
                                security_group_name: 'default',
                                id: '86bf8ac0-05ad-471d-b568-65c038410cb1',
                                region_name: null,
                                port_range_min: null,
                                protocol: 'icmp',
                                external_link: null,
                                port_range_max: null,
                            },
                            {
                                region_name: null,
                                port_range_min: null,
                                direction: 'ingress',
                                ethertype: 'IPv4',
                                port_range_max: null,
                                remote_ip_prefix: null,
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                created_at: '2021-06-28T06:33:28.000000+0000',
                                protocol: null,
                                id: '8fed73de-04f6-458a-8c47-78af5caff204',
                                external_link: null,
                                security_group_name: 'default',
                            },
                            {
                                created_at: '2021-06-28T06:33:28.000000+0000',
                                external_link: null,
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                protocol: null,
                                port_range_max: null,
                                id: '91a6bd7e-eff9-4066-a93e-3f7e6380361b',
                                ethertype: 'IPv4',
                                remote_ip_prefix: null,
                                region_name: null,
                                direction: 'egress',
                                security_group_name: 'default',
                                port_range_min: null,
                            },
                            {
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                security_group_name: 'default',
                                external_link: null,
                                protocol: null,
                                ethertype: 'IPv6',
                                region_name: null,
                                port_range_max: null,
                                id: 'bc22650c-6cba-4c8d-89e4-3e494cd893f1',
                                port_range_min: null,
                                direction: 'egress',
                                created_at: '2021-06-28T06:33:28.000000+0000',
                                remote_ip_prefix: null,
                            },
                            {
                                created_at: '2021-06-30T04:33:49.000000+0000',
                                port_range_min: 1,
                                region_name: null,
                                port_range_max: 65535,
                                ethertype: 'IPv4',
                                security_group_id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                                direction: 'egress',
                                protocol: 'tcp',
                                security_group_name: 'default',
                                external_link: null,
                                remote_ip_prefix: '0.0.0.0/0',
                                id: 'ff497d93-c62c-4195-8e6c-4bfecc69c93d',
                            },
                        ],
                        name: 'default',
                        description: 'Default security group',
                        created_at: '2021-06-28T06:33:28.000000+0000',
                        external_link: null,
                        updated_at: '2021-06-30T06:07:53.000000+0000',
                        id: 'c3a3eacb-2f61-4737-817d-58f1833fe7d8',
                        tenant_id: '36b7689d5832475e9e8a54558232de01',
                        region_name: 'RegionOne',
                        project_id: '36b7689d5832475e9e8a54558232de01',
                    },
                ],
            },
        },
    }}>
        {Template.bind({})}
    </Story>
</Canvas>

<ArgsTable story="Playground"/>

<br/>
<br/>
